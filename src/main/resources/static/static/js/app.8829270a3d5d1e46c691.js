webpackJsonp([1],{"+708":function(t,e,o){"use strict";var a={name:"vue-particles",props:{color:{type:String,default:"#dedede"},particleOpacity:{type:Number,default:.7},particlesNumber:{type:Number,default:80},shapeType:{type:String,default:"circle"},particleSize:{type:Number,default:4},linesColor:{type:String,default:"#dedede"},linesWidth:{type:Number,default:1},lineLinked:{type:Boolean,default:!0},lineOpacity:{type:Number,default:.4},linesDistance:{type:Number,default:150},moveSpeed:{type:Number,default:3},hoverEffect:{type:Boolean,default:!0},hoverMode:{type:String,default:"grab"},clickEffect:{type:Boolean,default:!0},clickMode:{type:String,default:"push"}},mounted:function(){var t=this;o("JAHf"),this.$nextTick(function(){t.initParticleJS(t.color,t.particleOpacity,t.particlesNumber,t.shapeType,t.particleSize,t.linesColor,t.linesWidth,t.lineLinked,t.lineOpacity,t.linesDistance,t.moveSpeed,t.hoverEffect,t.hoverMode,t.clickEffect,t.clickMode)})},methods:{initParticleJS:function(t,e,o,a,n,r,i,s,l,c,u,d,m,p,f){particlesJS("particles-js",{particles:{number:{value:o,density:{enable:!0,value_area:800}},color:{value:t},shape:{type:a,stroke:{width:0,color:"#192231"},polygon:{nb_sides:5}},opacity:{value:e,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:n,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:s,distance:c,color:r,opacity:l,width:i},move:{enable:!0,speed:u,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:d,mode:m},onclick:{enable:p,mode:f},onresize:{enable:!0,density_auto:!0,density_area:400}},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}}},n={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"particles-js",color:t.color,particleOpacity:t.particleOpacity,linesColor:t.linesColor,particlesNumber:t.particlesNumber,shapeType:t.shapeType,particleSize:t.particleSize,linesWidth:t.linesWidth,lineLinked:t.lineLinked,lineOpacity:t.lineOpacity,linesDistance:t.linesDistance,moveSpeed:t.moveSpeed,hoverEffect:t.hoverEffect,hoverMode:t.hoverMode,clickEffect:t.clickEffect,clickMode:t.clickMode}})},staticRenderFns:[]},r=o("VU/8")(a,n,!1,null,null,null);e.a=r.exports},"+cgv":function(t,e){},0:function(t,e){},"2oTL":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},A1tS:function(t,e,o){t.exports=o.p+"static/img/1.55d0286.png"},"C/dm":function(t,e){},H4JC:function(t,e){},HXSq:function(t,e){},LW0X:function(t,e,o){"use strict";var a=o("bOdI"),n=o.n(a),r={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes:function(){var t;return["ivu-icon",(t={},n()(t,"ivu-icon-"+this.type,""!==this.type),n()(t,""+this.custom,""!==this.custom),t)]},styles:function(){var t={};return this.size&&(t["font-size"]=this.size+"px"),this.color&&(t.color=this.color),t}},methods:{handleClick:function(t){this.$emit("click",t)}}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classes,style:this.styles,on:{click:this.handleClick}})},staticRenderFns:[]},s=o("VU/8")(r,i,!1,null,null,null);e.a=s.exports},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=o("VU/8")({name:"app"},n,!1,function(t){o("p0ZO")},null,null).exports,i=o("/ocq"),s=o("8+8L"),l=o("BTaQ"),c=o.n(l),u=(o("HXSq"),o("G0J2")),d=o.n(u),m=(o("3f40"),o("4qOc"),o("+cgv"),{name:"HelloWorld",data:function(){return{note:{width:"100%",height:"100%",backgroundColor:"#e7e1e1",backgroundImage:"url("+o("A1tS")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center,center",backgroundSize:"cover",marginTop:"40px"},msg:"图书馆",verifyCode:"hello",formItem:{account:"",password:"",code:""},ruleItem:{account:[{required:!0,message:"请填写账号！",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:3,message:"密码长度不能小于6位",trigger:"blur"}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}]},loading:!1}},mounted:function(){this.createCode()},methods:{handleSubmit:function(t){var e=this,o=this;this.loading=!0,this.$refs[t].validate(function(t){t?o.verifyCode===o.formItem.code?o.$http.post(o.GLOBAL.serverPath+"/excise/login",{account:o.formItem.account,password:o.formItem.password},{emulateJSON:!0}).then(function(t){console.log(t.data.loginUser),"yes"===t.data.result?(this.$Message.success("登录成功!"),window.localStorage.setItem("userId",t.data.loginUser.rid),window.localStorage.setItem("account",t.data.loginUser.account),window.localStorage.setItem("username",t.data.loginUser.name),window.localStorage.setItem("sex",t.data.loginUser.sex),window.localStorage.setItem("condi",t.data.loginUser.condi),console.log("hahaha"+t.data.condi),2===t.data.condi?this.$router.replace({path:"/index"}):1===t.data.condi?this.$router.replace({path:"/index"}):this.$router.replace({path:"/reader"})):(this.$Message.error("账号或密码有误！"),this.loading=!1)}):(o.$Message.error("请填写正确的验证码!"),e.loading=!1):e.loading=!1})},createCode:function(){for(var t="",e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o=0;o<4;o++){t+=e[Math.floor(36*Math.random())]}console.log(t),this.verifyCode=t},changePage:function(){var t=this;setTimeout(function(){t.$Loading.start(),t.$Loading.finish(),t.$router.push({path:"/"})},600)}}}),p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello",style:t.note},[o("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleItem,"label-width":80}},[o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("h2",[t._v(t._s(t.msg))])])],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"account",label:"账号"}},[o("Input",{attrs:{type:"text",placeholder:"你的学号/工号"},model:{value:t.formItem.account,callback:function(e){t.$set(t.formItem,"account",e)},expression:"formItem.account"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-home-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"password",label:"密码"}},[o("Input",{attrs:{type:"password",placeholder:"你的密码"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:16,sm:16,md:16,lg:16}},[o("FormItem",{attrs:{prop:"code",label:"验证码"}},[o("Input",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.formItem.code,callback:function(e){t.$set(t.formItem,"code",e)},expression:"formItem.code"}})],1)],1),t._v(" "),o("Col",{attrs:{xs:8,sm:8,md:8,lg:8}},[o("h2",{attrs:{id:"verifyCode"},on:{click:function(e){return t.createCode()}}},[t._v(t._s(t.verifyCode))])])],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:24,sm:24,md:24,lg:24}},[o("Button",{attrs:{id:"login_btn",shape:"circle",type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit("formItem")}}},[t.loading?o("span",[t._v("登录中...")]):o("span",[t._v("登录")])])],1)],1),t._v(" "),o("Row",{staticClass:"tip"},[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10,offset:"16"}},[o("span",{staticClass:"login_font"},[o("a",{on:{click:function(e){return t.changePage()}}},[t._v("注册 ")]),t._v(" |    "),o("a",{attrs:{href:"#"}},[t._v("忘记密码？")])])])],1)],1),t._v(" "),o("vue-particles",{staticClass:"lizi",attrs:{color:"#fff",particleOpacity:.7,particlesNumber:60,shapeType:"circle",particleSize:4,linesColor:"#fff",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,moveSpeed:2,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}})],1)},staticRenderFns:[]};var f=o("VU/8")(m,p,!1,function(t){o("QLRR")},"data-v-06c595d4",null).exports,h={name:"UserManage",data:function(){var t=this;return{total:"",condi:"",modal1:!1,formInline:{account:""},formItem2:{account:"",name:"",sex:"男",condi:"0"},ruleItem2:{account:[{required:!0,message:"请填写账号！",trigger:"blur"}],name:[{required:!0,message:"请填写学生姓名",trigger:"blur"}]},columns7:[{title:"学号",key:"account",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.account)])}},{title:"姓名",key:"name"},{title:"性别",key:"sex"},{title:"录入时间",key:"time"},{title:"身份",key:"condi"},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(o.index)}}},"查看"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o.index)}}},"删除")])}}],data6:[]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){0==this.data6[t].condi?this.condi="学生":this.condi="图书管理员",this.$Modal.info({title:"用户信息",content:"姓名："+this.data6[t].name+"<br>年龄："+this.data6[t].sex+"<br>学号："+this.data6[t].account+"<br>身份："+this.condi})},remove:function(t){this.data6.splice(t,1)},request:function(t){var e=this,o=this;this.$http.post(o.GLOBAL.serverPath+"/excise/getAllReaders",{account:o.formInline.account,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.pageInfo),o.total=t.data.pageInfo.total,o.data6=t.data.readers}).catch(function(t){e.$Message.fail("网络有误！")})},changePage:function(t){this.request(t)},ok:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addReader",{account:e.formItem2.account,name:e.formItem2.name,sex:e.formItem2.sex,condi:e.formItem2.condi},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status?(e.$Message.success("新增成功"),e.formInline.account="",e.request(1)):e.$Message.error("已存在该学号的用户")}).catch(function(t){e.$Message.fail("网络有误！")})})}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[o("FormItem",{attrs:{prop:"account"}},[o("Input",{attrs:{type:"text",placeholder:"学号"},model:{value:t.formInline.account,callback:function(e){t.$set(t.formInline,"account",e)},expression:"formInline.account"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.modal1=!0}}},[t._v("新添用户")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}}),t._v(" "),o("Modal",{attrs:{title:"新添用户"},on:{"on-ok":function(e){return t.ok("formItem2")}},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[o("Form",{ref:"formItem2",attrs:{model:t.formItem2,rules:t.ruleItem2,"label-width":80}},[o("FormItem",{attrs:{label:"学号",prop:"account"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem2.account,callback:function(e){t.$set(t.formItem2,"account",e)},expression:"formItem2.account"}})],1),t._v(" "),o("FormItem",{attrs:{label:"姓名",prop:"name"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem2.name,callback:function(e){t.$set(t.formItem2,"name",e)},expression:"formItem2.name"}})],1),t._v(" "),o("FormItem",{attrs:{label:"性别",prop:"sex"}},[o("RadioGroup",{model:{value:t.formItem2.sex,callback:function(e){t.$set(t.formItem2,"sex",e)},expression:"formItem2.sex"}},[o("Radio",{attrs:{label:"男"}},[t._v("男")]),t._v(" "),o("Radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),t._v(" "),o("FormItem",{attrs:{label:"身份",prop:"condi"}},[o("Select",{model:{value:t.formItem2.condi,callback:function(e){t.$set(t.formItem2,"condi",e)},expression:"formItem2.condi"}},[o("Option",{attrs:{value:"0"}},[t._v("学生")]),t._v(" "),o("Option",{attrs:{value:"1"}},[t._v("图书管理员")])],1)],1)],1)],1)],1)},staticRenderFns:[]},g=o("VU/8")(h,v,!1,null,null,null).exports,b={name:"UserManage",data:function(){var t=this;return{total:0,condi:"",modal1:!1,modal2:!1,content:"",currIndex:0,formInline:{title:""},formItem2:{title:"",author:"",publisher:"",publishtime:"",descri:""},ruleItem2:{title:[{required:!0,message:"请填写书名！",trigger:"blur"}],author:[{required:!0,message:"请填书籍作者",trigger:"blur"}],publisher:[{required:!0,message:"请填出版社",trigger:"blur"}],publishtime:[{required:!0,message:"请填写出版时间"}],descri:[{required:!0,message:"请填书籍描述",trigger:"blur"}]},formItem3:{num:""},ruleItem3:{num:[{required:!0,message:"请填写书籍副本编号！",trigger:"blur"}]},columns7:[{title:"编号",key:"aid",render:function(t,e){return t("div",[t("Icon",{props:{type:"document-text"}}),t("strong",e.row.aid)])}},{title:"书名",key:"title"},{title:"作者",key:"author"},{title:"出版社",key:"publisher"},{title:"出版时间",key:"publishtime"},{title:"操作",key:"action",width:300,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(o.index)}}},"查看"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modal2=!0,t.currIndex=t.data6[o.index].aid}}},"添加编号副本"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o.index)}}},"删除")])}}],data6:[{aid:"3044413",title:"《xxx》",author:"xxx",publisher:"xxxx",publishtime:"2017"}],data7:[]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){this.$Modal.info({title:"书籍信息",width:"1100",content:"书名："+this.data6[t].title+"<br>作者："+this.data6[t].author+"<br>出版社："+this.data6[t].publisher+"<br>出版时间："+this.data6[t].publishtime+"<br>副本数量："+this.data6[t].num+"<br>可借数量："+this.data6[t].count+'<br>可借副本编号：<span style="color:red;">'+this.data6[t].suba+"</span><br>介绍："+this.data6[t].descri})},remove:function(t){this.data6.splice(t,1)},request:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/getAllAlbums",{title:e.formInline.title,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.pageInfo),e.total=t.data.pageInfo.total,e.data6=[],e.data7=t.data.albums,e.data7.forEach(function(t){var o={};o.aid=t.aid,o.title=t.title,o.author=t.author,o.publisher=t.publisher,o.publishtime=t.publishtime,o.num=t.num,o.descri=t.descri;var a=0,n="";t.subalbums.forEach(function(t){0==t.condi&&(a++,n=n+t.number+",")}),o.count=a,o.suba=n,e.data6.push(o)})})},changePage:function(t){this.request(t)},ok:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addAlbum",{title:e.formItem2.title,author:e.formItem2.author,publisher:e.formItem2.publisher,publishtime:e.formItem2.publishtime+"",descri:e.formItem2.descri},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status&&(e.$Notice.config({top:50,duration:3,title:"通知",desc:"新添书籍成功!"}),e.formInline.account="",e.formItem2.title="",e.formItem2.author="",e.formItem2.publisher="",e.formItem2.publishtime="",e.formItem2.descri="",e.request(1))}).catch(function(t){e.$Message.fail("网络有误！")})})},ok2:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addSubAlbum",{aid:e.currIndex,number:e.formItem3.num},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status?(e.$Message.success("新增成功"),e.formItem3.num="",e.request(1)):e.$Message.error("新增失败！查看是否存在相同编号")}).catch(function(t){e.$Message.fail("网络有误！")})})},onEditorChange:function(t){var e=t.editor,o=t.html,a=t.text;console.log(e,o,a),this.content=o}}},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[o("FormItem",{attrs:{prop:"account"}},[o("Input",{attrs:{type:"text",placeholder:"书名"},model:{value:t.formInline.title,callback:function(e){t.$set(t.formInline,"title",e)},expression:"formInline.title"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-book-outline"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.modal1=!0}}},[t._v("新添书籍")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}}),t._v(" "),o("Modal",{attrs:{title:"新添书籍",width:"800",scrollable:"true","ok-text":"添加"},on:{"on-ok":function(e){return t.ok("formItem2")}},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[o("Form",{ref:"formItem2",attrs:{model:t.formItem2,rules:t.ruleItem2,"label-width":80}},[o("FormItem",{attrs:{label:"书名",prop:"title"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem2.title,callback:function(e){t.$set(t.formItem2,"title",e)},expression:"formItem2.title"}})],1),t._v(" "),o("FormItem",{attrs:{label:"作者",prop:"author"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem2.author,callback:function(e){t.$set(t.formItem2,"author",e)},expression:"formItem2.author"}})],1),t._v(" "),o("FormItem",{attrs:{label:"出版社",prop:"publisher"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem2.publisher,callback:function(e){t.$set(t.formItem2,"publisher",e)},expression:"formItem2.publisher"}})],1),t._v(" "),o("FormItem",{attrs:{label:"出版时间",prop:"publishtime"}},[o("DatePicker",{staticStyle:{width:"200px"},attrs:{prop:"publishtime",type:"date",placeholder:"选择出版日期"},model:{value:t.formItem2.publishtime,callback:function(e){t.$set(t.formItem2,"publishtime",e)},expression:"formItem2.publishtime"}})],1),t._v(" "),o("FormItem",{attrs:{label:"描述",prop:"descri"}},[o("quill-editor",{ref:"VueQuillEditor",attrs:{content:t.content},on:{change:function(e){return t.onEditorChange(e)}},model:{value:t.formItem2.descri,callback:function(e){t.$set(t.formItem2,"descri",e)},expression:"formItem2.descri"}})],1)],1)],1),t._v(" "),o("Modal",{attrs:{title:"新添书籍副本","ok-text":"添加副本"},on:{"on-ok":function(e){return t.ok2("formItem3")}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("Form",{ref:"formItem3",attrs:{model:t.formItem3,rules:t.ruleItem3,"label-width":80}},[o("FormItem",{attrs:{label:"编号",prop:"num"}},[o("Input",{attrs:{placeholder:""},model:{value:t.formItem3.num,callback:function(e){t.$set(t.formItem3,"num",e)},expression:"formItem3.num"}})],1)],1)],1)],1)},staticRenderFns:[]},I=o("VU/8")(b,_,!1,null,null,null).exports,y={name:"UserManage",data:function(){var t=this;return{total:"",condi:"",modal1:!1,modal2:!1,currIndex:0,formInline:{raccount:""},columns7:[{title:"编号",key:"bid",render:function(t,e){return t("div",[t("Icon",{props:{type:"document-text"}}),t("strong",e.row.bid)])}},{title:"书名",key:"title"},{title:"编号",key:"number"},{title:"借阅者学号",key:"raccount"},{title:"借阅者姓名",key:"rname"},{title:"借阅时间",key:"time"},{title:"应归还时间",key:"backtime"},{title:"是否超期",key:"condi"},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(o.index)}}},"查看"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.reback(o.index)}}},"确认归还")])}}],data6:[],data7:[]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){this.$Modal.info({title:"书籍信息",content:"书名："+this.data6[t].title+"<br>书籍编号："+this.data6[t].number+"<br>借阅者学号："+this.data6[t].raccount+"<br>借阅者姓名："+this.data6[t].rname+"<br>借阅时间："+this.data6[t].time+"<br>应归还时间："+this.data6[t].backtime+"<br>状态："+this.data6[t].condi})},reback:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/reback",{bid:e.data6[t].bid,sid:e.data6[t].sid},{emulateJSON:!0}).then(function(o){"yes"==o.data.status?(e.data6.splice(t,1),this.$Message.success("操作成功")):this.$Message.status("操作失败")})},request:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/getAllBorrowRecords",{raccount:e.formInline.raccount,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.borrowrecords),e.total=t.data.pageInfo.total,e.data6=[],e.data7=t.data.borrowrecords,e.data7.forEach(function(t){var o={};o.bid=t.bid,o.title=t.album.title,o.number=t.subalbum.number,o.raccount=t.raccount,o.rname=t.reader.name,o.time=t.time,o.backtime=t.backtime,o.sid=t.sid;var a=(new Date).getTime();if(console.log(a),a<t.inttime)o.condi="未超期";else{var n=Math.ceil((a-t.inttime)/864e5);o.condi="超期"+n+"天"}e.data6.push(o)})})},changePage:function(t){this.request(t)}}},k={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[o("FormItem",{attrs:{prop:"borrowRecord"}},[o("Input",{attrs:{type:"text",placeholder:"借阅者学号"},model:{value:t.formInline.raccount,callback:function(e){t.$set(t.formInline,"raccount",e)},expression:"formInline.raccount"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}})],1)},staticRenderFns:[]},w=o("VU/8")(y,k,!1,null,null,null).exports,x={name:"VerifyUser",data:function(){var t=this;return{total:"",condi:"",modal1:!1,formInline:{account:""},formItem2:{account:"",name:"",sex:"男",condi:"0",number:"",email:""},ruleItem2:{account:[{required:!0,message:"请填写账号！",trigger:"blur"}],name:[{required:!0,message:"请填写学生姓名",trigger:"blur"}]},columns7:[{title:"学号",key:"account",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.account)])}},{title:"姓名",key:"name"},{title:"性别",key:"sex"},{title:"身份",key:"condi"},{title:"操作",key:"action",width:300,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(o.index)}}},"查看"),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.remove(o.index),t.showSucess()}}},"通过"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.modal1=!0,t.remove(o.index)}}},"不通过")])}}],data6:[{account:"123456",name:"王小明",sex:"男",condi:"学生",number:"123456789",email:"123456@qq.com"},{account:"123456",name:"小李",sex:"女",condi:"学生",number:"123456789",email:"123456@qq.com"}]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){this.$Modal.info({title:"用户信息",content:"姓名："+this.data6[t].name+"\n        <br>年龄："+this.data6[t].sex+"\n        <br>学号："+this.data6[t].account+"\n        <br>身份："+this.data6[t].condi+"\n        <br>电话号码: "+this.data6[t].number+"\n        <br>邮箱："+this.data6[t].email})},showSucess:function(){this.$Modal.info({title:"系统提示",content:"成功通过"})},remove:function(t){this.data6.splice(t,1)},request:function(t){var e=this,o=this;this.$http.post(o.GLOBAL.serverPath+"/excise/getAllReaders",{account:o.formInline.account,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.pageInfo),o.total=t.data.pageInfo.total,o.data6=t.data.readers}).catch(function(t){e.$Message.fail("网络有误！")})},changePage:function(t){this.request(t)},ok:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addReader",{account:e.formItem.account,name:e.formItem.name,sex:e.formItem.sex,condi:e.formItem.condi},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status?(e.$Message.success("新增成功"),e.formInline.account="",e.request(1)):e.$Message.error("已存在该学号的用户")}).catch(function(t){e.$Message.fail("网络有误！")})})}}},$={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[o("FormItem",{attrs:{prop:"account"}},[o("Input",{attrs:{type:"text",placeholder:"学号"},model:{value:t.formInline.account,callback:function(e){t.$set(t.formInline,"account",e)},expression:"formInline.account"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}}),t._v(" "),o("Modal",{attrs:{title:"确认提醒"},on:{"on-ok":function(e){return t.remove(t.params.index)}},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("确认不通过该用户的审核申请吗？")])])]),t._v(" "),o("Modal",{attrs:{title:"确认提醒"},on:{"on-ok":function(e){return t.ok(t.params.index)}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("确认通过该用户的审核申请吗？")])])])],1)},staticRenderFns:[]},S=o("VU/8")(x,$,!1,null,null,null).exports,C={name:"Feedback",data:function(){var t=this;return{total:"",condi:"",formInline:{account:""},columns7:[{title:"学号",key:"account",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.account)])}},{title:"姓名",key:"name"},{title:"性别",key:"sex"},{title:"身份",key:"condi"},{title:"邮箱",key:"email"},{title:"用户留言",key:"feedback"},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o.index),t.$Message.info("用户留言已删除",3)}}},"删除")])}}],data6:[{account:"201830681053",name:"小刘",sex:"女",condi:"学生",email:"123456789@qq.com",feedback:"此图书管理系统简洁实用，但书籍种类太少，读者可借天数太短，希望改进"}]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){0==this.data6[t].condi?this.condi="学生":this.condi="图书管理员",this.$Modal.info({title:"用户信息",content:"学号："+this.data6[t].account+"<br>姓名："+this.data6[t].name+"<br>性别："+this.data6[t].sex+"<br>身份："+this.condi+"<br>邮箱："+this.data6[t].email+"<br>用户留言："+this.data6[t].feedback})},remove:function(t){this.data6.splice(t,1)},request:function(t){var e=this,o=this;this.$http.post(o.GLOBAL.serverPath+"/excise/getAllReaders",{account:o.formInline.account,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.pageInfo),o.total=t.data.pageInfo.total,o.data6=t.data.readers}).catch(function(t){e.$Message.fail("网络有误！")})},changePage:function(t){this.request(t)}}},M={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[o("FormItem",{attrs:{prop:"account"}},[o("Input",{attrs:{type:"text",placeholder:"学号"},model:{value:t.formInline.account,callback:function(e){t.$set(t.formInline,"account",e)},expression:"formInline.account"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}})],1)},staticRenderFns:[]},B=o("VU/8")(C,M,!1,null,null,null).exports,O=o("bOdI"),R=o.n(O),q=o("EMb8"),F=o("9Xvl"),L={name:"Button",mixins:[o("kcQm").a],components:{Icon:q.a},props:{type:{validator:function(t){return Object(F.a)(t,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator:function(t){return Object(F.a)(t,["circle","circle-outline"])}},size:{validator:function(t){return Object(F.a)(t,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator:function(t){return Object(F.a)(t,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},data:function(){return{showSlot:!0}},computed:{classes:function(){var t;return["ivu-btn","ivu-btn-"+this.type,(t={},R()(t,"ivu-btn-long",this.long),R()(t,"ivu-btn-"+this.shape,!!this.shape),R()(t,"ivu-btn-"+this.size,"default"!==this.size),R()(t,"ivu-btn-loading",null!=this.loading&&this.loading),R()(t,"ivu-btn-icon-only",!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading)),R()(t,"ivu-btn-ghost",this.ghost),t)]},isHrefPattern:function(){return!!this.to},tagName:function(){return this.isHrefPattern?"a":"button"},tagProps:function(){return this.isHrefPattern?{href:this.linkUrl,target:this.target}:{type:this.htmlType}}},methods:{handleClickLink:function(t){this.$emit("click",t);var e=t.ctrlKey||t.metaKey;this.handleCheckClick(t,e)}},mounted:function(){this.showSlot=void 0!==this.$slots.default}},P={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(t.tagName,t._b({tag:"component",class:t.classes,attrs:{disabled:t.disabled},on:{click:t.handleClickLink}},"component",t.tagProps,!1),[t.loading?o("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):t._e(),t._v(" "),!t.icon&&!t.customIcon||t.loading?t._e():o("Icon",{attrs:{type:t.icon,custom:t.customIcon}}),t._v(" "),t.showSlot?o("span",{ref:"slot"},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},z=o("VU/8")(L,P,!1,null,null,null).exports,E={name:"Index",data:function(){return{msg:"haha",one_nav:"主页",two_nav:"后台管理",three_nav:"用户管理",currentView:"userManage",modal7:!1,modal2:!1,modal6:!1,modal_loading:!1,value:5}},mounted:function(){this.msg=window.localStorage.getItem("username")},methods:{lookUser:function(){this.currentView="userManage",this.one_nav="主页",this.two_nav="后台管理",this.three_nav="用户管理",this.currentView="userManage"},lookBook:function(){this.one_nav="主页",this.two_nav="后台管理",this.three_nav="图书管理",this.currentView="bookManage"},lookRecord:function(){this.one_nav="主页",this.two_nav="后台管理",this.three_nav="借阅记录",this.currentView="recordManage"},Verify:function(){this.currentView="verifyUser",this.one_nav="主页",this.two_nav="后台管理",this.three_nav="用户审核"},Feedback:function(){this.currentView="feedBack",this.one_nav="主页",this.two_nav="后台管理",this.three_nav="用户留言"},del:function(){var t=this;this.modal_loading=!0,setTimeout(function(){t.modal_loading=!1,t.modal6=!1,t.$Message.success("退出成功"),t.$Loading.start(),t.$Loading.finish(),t.$router.push("/login")},2e3)},confirm:function(){this.modal_loading=!0,this.modal_loading=!1,this.modal7=!1},ok:function(){this.$Message.info("上传成功！")},cancel:function(){this.$Message.info("取消上传")},changePage1:function(){this.$router.push("/login")}},components:{Button:z,userManage:g,bookManage:I,recordManage:w,verifyUser:S,feedBack:B}},N={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"layout"},[o("Modal",{attrs:{width:"360"},model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),t._v(" "),o("span",[t._v("退出确认")])],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("退出后，将返回登录界面")]),t._v(" "),o("p",[t._v("是否退出？")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("i-button",{staticStyle:{color:"white"},attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t.del}},[t._v("退出")])],1)]),t._v(" "),o("Modal",{attrs:{title:"留言反馈"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("p",[t._v("评分："),o("Rate",{attrs:{"show-text":"",value:t.value},on:{"update:value":function(e){t.value=e}}})],1),t._v(" "),o("i-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入..."}})],1),t._v(" "),o("Modal",{attrs:{width:"600"},model:{value:t.modal7,callback:function(e){t.modal7=e},expression:"modal7"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),t._v(" "),o("span",[t._v("帮助中心")])],1),t._v(" "),o("div",[o("p",[t._v("亲爱的读者：")]),t._v(" "),o("p",[t._v("     欢迎使用此图书借阅管理系统。为了让您和他人有更好的阅读体验，请仔细阅读以下事项。")]),t._v(" "),o("br"),t._v(" "),o("h4",[t._v("一、借阅规则：")]),t._v(" "),o("p",[t._v("    1. 本图书馆所有书籍对xx大学所有学生和教职人员开放。读者初次使用本系统需凭学号或教职工号注册，登录后则可随时修改个人信息与账号密码。")]),t._v(" "),o("p",[t._v("    2. 读者可以在图书馆检索系统浏览和查询数目和借阅状态，可在借阅记录中查看个人借阅记录。")]),t._v(" "),o("p",[t._v("    3. 每位读者可借阅5本书籍，借期60天。需要续借的读者请先归还再继续按照流程借阅。")]),t._v(" "),o("p",[t._v("    4. 读者须在借阅期限到达之前归还书籍，逾期将按相关规定收取超期滞纳金，每天每本0.1元。")]),t._v(" "),o("p",[t._v("    5. 确认借阅图书时，读者应当当场确认图书是否有损坏，如有问题及时向工作人员反映。一旦确认借阅后，衍生的损毁问题，由读者自行负责。")]),t._v(" "),o("p",[t._v("    6. 读者外借图书时，读者应当确认图书是否有损坏，否则衍生损毁问题，同样又读者自行负责。")]),t._v(" "),o("p",[t._v("    7. 读者归还图书时，应当到图书馆归还，并确认归还至指定的归还地点。否则管理员无法登记归还。")]),t._v(" "),o("p",[t._v("    8. 图书有损坏、遗失处理按本规定第二条遗失赔偿办法中的相关规定执行。")]),t._v(" "),o("br"),t._v(" "),o("h4",[t._v("二、损坏遗失赔偿办法")]),t._v(" "),o("p",[t._v("    1. 损坏赔偿。读者若在使用过程中对图书造成损坏，应视损坏程度轻重予以相应赔偿，赔偿范围按照著录价格的1-2倍收取。损坏严重导致不能正常使用或影响使用的，按第2款“遗失赔偿”条款处理。")]),t._v(" "),o("p",[t._v("    2. 遗失赔偿。读者若遗失图书，需及时向图书馆报告，并购买相同的书本赔偿，或者按照著录价格的2倍赔偿。")]),t._v(" "),o("br"),t._v(" "),o("p",[t._v("如有疑问或遇到问题，请点击系统右上角【留言反馈】给管理员留言，管理员会一一处理并通过邮件与你联系。")]),t._v(" "),o("br"),t._v(" "),o("div",{staticStyle:{"text-align":"right"}},[o("p",[t._v("xx大学图书管理系统")])])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("i-button",{staticStyle:{color:"white"},attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:function(e){return t.confirm()}}},[t._v("确定")])],1)]),t._v(" "),o("div",{staticClass:"layout-ceiling"},[t._m(0),t._v(" "),o("div",{staticClass:"layout-ceiling-main"},[o("a",{attrs:{href:"#"}},[o("Icon",{attrs:{type:"ios-browsers-outline"}})],1),t._v(" "),o("a",{on:{click:function(e){t.modal7=!0}}},[t._v("帮助中心")]),t._v(" |\n      "),o("a",{on:{click:function(e){t.modal2=!0}}},[t._v("留言反馈")]),t._v(" |\n       "),o("a",{on:{click:function(e){t.modal6=!0}}},[t._v("退出登录")])])]),t._v(" "),t._m(1),t._v(" "),o("div",{staticClass:"layout-content"},[o("Row",{attrs:{type:"flex"}},[o("Col",{staticClass:"layout-menu-left",attrs:{span:"5"}},[o("Menu",{attrs:{"active-name":"1-1",theme:"dark",width:"auto","open-names":["1"]}},[o("Menu-group",{attrs:{title:"欢迎你，图书管理员！"}},[t._v("\n        "+t._s(t.msg)+"\n      "),o("Submenu",{attrs:{name:"1"}},[o("template",{slot:"title"},[o("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n          后台管理\n        ")],1),t._v(" "),o("MenuItem",{attrs:{name:"1-1"},nativeOn:{click:function(e){return t.lookUser(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-person"}}),t._v("\n          用户管理")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-2"},nativeOn:{click:function(e){return t.lookBook(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-book"}}),t._v("\n          图书管理")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-3"},nativeOn:{click:function(e){return t.lookRecord(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n          借阅记录")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-4"},nativeOn:{click:function(e){return t.Verify(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-flag"}}),t._v("\n          用户审核")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-5"},nativeOn:{click:function(e){return t.Feedback(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-paper"}}),t._v("\n          用户留言")],1)])],2),t._v(">\n      ")],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"19"}},[o("div",{staticClass:"layout-breadcrumb"},[o("Breadcrumb",[o("BreadcrumbItem",{attrs:{href:"#"}},[t._v(t._s(t.one_nav))]),t._v(" "),o("BreadcrumbItem",{attrs:{href:"#"}},[t._v(t._s(t.two_nav))]),t._v(" "),o("BreadcrumbItem",[t._v(t._s(t.three_nav))]),t._v(" "),o("Button",{attrs:{id:"login_btn"},on:{click:function(e){return t.warning(!1)}}},[o("Badge",{attrs:{dot:""}},[o("Icon",{attrs:{type:"ios-mail-outline",size:"26","color:white":""}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"layout-content-main"},[void 0,t._v(" "),void 0,t._v(" "),void 0,t._v(" "),void 0,t._v(" "),void 0,t._v(" "),o(t.currentView,{tag:"component"})],2),t._v(" "),o("div",{staticStyle:{height:"600px"}}),t._v(" "),o("div",{staticClass:"layout-copy"},[t._v("\n      2019-2020 © 图书馆管理\n    ")])])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-ceiling-left"},[e("div",{staticClass:"layout-logo-left"},[e("h2",{staticStyle:{color:"white"}},[this._v("图书管理系统")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-header"},[e("div",{staticClass:"layout-logo"})])}]};var U=o("VU/8")(E,N,!1,function(t){o("C/dm")},"data-v-42d875d4",null).exports,A={name:"SearchBook",data:function(){var t=this;return{total:"",condi:"",modal1:!1,modal2:!1,currIndex:0,formInline:{title:""},formItem2:{title:"",author:"",publisher:"",publishtime:"",descri:""},ruleItem2:{title:[{required:!0,message:"请填写书名！",trigger:"blur"}],author:[{required:!0,message:"请填书籍作者",trigger:"blur"}],publisher:[{required:!0,message:"请填出版社",trigger:"blur"}],publishtime:[{required:!0,message:"请填写出版时间"}],descri:[{required:!0,message:"请填书籍描述",trigger:"blur"}]},formItem3:{num:""},ruleItem3:{num:[{required:!0,message:"请填写书籍副本编号！",trigger:"blur"}]},columns7:[{title:"编号",key:"aid",render:function(t,e){return t("div",[t("Icon",{props:{type:"document-text"}}),t("strong",e.row.aid)])}},{title:"书名",key:"title"},{title:"作者",key:"author"},{title:"出版社",key:"publisher"},{title:"出版时间",key:"publishtime"},{title:"可借副本",key:"count"},{title:"操作",key:"action",width:150,align:"center",render:function(e,o){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(o.index)}}},"查看"),e("Button",{props:{type:"error",size:"small",disabled:t.data6[o.index].unBorrowed},on:{click:function(){t.borrow(o.index)}}},"借阅")])}}],data6:[{aid:"123456",title:"123456",author:"author",publisher:"publishtime",publishtime:"2017.10.1",count:"5",action:""}],data7:[]}},mounted:function(){this.request(1)},methods:{handleSubmit:function(t){this.request(1)},show:function(t){this.$Modal.info({title:"书籍信息",width:"1100",content:"书名："+this.data6[t].title+"<br>作者："+this.data6[t].author+"<br>出版社："+this.data6[t].publisher+"<br>出版时间："+this.data6[t].publishtime+"<br>副本数量："+this.data6[t].num+"<br>可借数量："+this.data6[t].count+'<br>可借副本编号：<span style="color:red;">'+this.data6[t].suba+"</span><br>介绍："+this.data6[t].descri})},borrow:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/borrow",{aid:e.data6[t].aid,rid:window.localStorage.getItem("userId"),raccount:window.localStorage.getItem("account")},{emulateJSON:!0}).then(function(o){"ok"==o.data.status?(this.$Message.success("借阅成功,注意归还日期！"),e.data6[t].count=e.data6[t].count-1,0==e.data6[t].count&&(this.data6[t].unBorrowed=!0)):this.$Message.error("借阅失败，请重试!")})},request:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/getAllAlbums",{title:e.formInline.title,currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.pageInfo),e.total=t.data.pageInfo.total,e.data6=[],e.data7=t.data.albums,e.data7.forEach(function(t){var o={};o.aid=t.aid,o.title=t.title,o.author=t.author,o.publisher=t.publisher,o.publishtime=t.publishtime,o.num=t.num,o.descri=t.descri;var a=0,n="";t.subalbums.forEach(function(t){0==t.condi&&(a++,n=n+t.number+",")}),o.unBorrowed=0==a,o.count=a,o.suba=n,e.data6.push(o)})})},changePage:function(t){this.request(t)}}},V={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formInline",attrs:{model:t.formInline,inline:""}},[o("FormItem",{attrs:{prop:"account"}},[o("Input",{attrs:{type:"text",placeholder:"书名"},model:{value:t.formInline.title,callback:function(e){t.$set(t.formInline,"title",e)},expression:"formInline.title"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-search"},slot:"prepend"})],1)],1),t._v(" "),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("查找")])],1)],1),t._v(" "),o("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}}),t._v(" "),o("Page",{attrs:{total:t.total,"page-size":10},on:{"on-change":t.changePage}})],1)},staticRenderFns:[]},T={name:"MyRecord",data:function(){return{total:"",condi:"",modal1:!1,modal2:!1,currIndex:0,formInline:{raccount:""},columns7:[{title:"编号",key:"bid",render:function(t,e){return t("div",[t("Icon",{props:{type:"document-text"}}),t("strong",e.row.bid)])}},{title:"书名",key:"title"},{title:"编号",key:"number"},{title:"借阅者学号",key:"raccount"},{title:"借阅者姓名",key:"rname"},{title:"借阅时间",key:"time"},{title:"应归还时间",key:"backtime"},{title:"是否超期",key:"condi"}],data6:[],data7:[]}},mounted:function(){this.request(1)},methods:{request:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/getAllBorrowRecords",{raccount:window.localStorage.getItem("account"),currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.borrowrecords),e.total=t.data.pageInfo.total,e.data6=[],e.data7=t.data.borrowrecords,e.data7.forEach(function(t){var o={};o.bid=t.bid,o.title=t.album.title,o.number=t.subalbum.number,o.raccount=t.raccount,o.rname=t.reader.name,o.time=t.time,o.backtime=t.backtime;var a=(new Date).getTime();if(console.log(a),a<t.inttime)o.condi="未超期";else{var n=Math.ceil((a-t.inttime)/864e5);o.condi="超期"+n+"天"}e.data6.push(o)})})},changePage:function(t){this.request(t)}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("Table",{attrs:{border:"",columns:this.columns7,data:this.data6}}),this._v(" "),e("Page",{attrs:{total:this.total,"page-size":10},on:{"on-change":this.changePage}})],1)},staticRenderFns:[]},G={name:"Individual",data:function(){return{msg:"个人中心",modal1:!1,modal2:!1,modal3:!1,name:"",account:"",phonenumber:"",email:"",password:"",content:"",formItem:{name:"",account:"",phonenumber:"",email:"",password:""},formItem2:{phonenumber:""},formItem3:{email:""},formItem4:{password:""},ruleItem:{account:[{required:!0,message:"请填写账号！",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:3,message:"密码长度不能小于6位",trigger:"blur"}]},loading:!1}},mounted:function(){this.request(1)},computed:{user:function(){return this.$store.state.user}},methods:{getName:function(){return name=window.localStorage.getItem("username",res.data.loginUser.name),name},getAccount:function(){return account=window.localStorage.getItem("account",res.data.loginUser.account),account},getPhoneno:function(){return phonenumber=window.localStorage.getItem("phonenumber",res.data.loginUser.phonenumber),phonenumber},getEmail:function(){return email=window.localStorage.getItem("email",res.data.loginUser.email),email},handleSubmit:function(t){var e=this,o=this;this.loading=!0,this.$refs[t].validate(function(t){t?o.$http.post(o.GLOBAL.serverPath+"/excise/login",{name:o.formItem.name,account:o.formItem.account,phonenumber:o.formItem2.phonenumber,email:o.formItem3.email,password:o.formItem4.password},{emulateJSON:!0}).then(function(t){console.log(t.data.loginUser),"yes"===t.data.result?(this.$Message.success("修改提交成功!"),window.localStorage.setItem("email",t.data.loginUser.email),window.localStorage.setItem("phonenumber",t.data.loginUser.phonenumber),window.localStorage.setItem("password",t.data.loginUser.password)):(this.$Message.error("修改提交失败！请重新修改！"),this.loading=!1)}):e.loading=!1})},changePage:function(){this.$Loading.start(),this.$Loading.finish(),this.$router.push({path:"/"})},ok2:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addAlbum",{phonenumber:e.formItem2.phonenumber},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status&&(e.$Notice.config({top:50,duration:3,title:"通知",desc:"已经保存修改！请点击提交修改！"}),e.formItem2.phonenumber="",e.request(1))}).catch(function(t){e.$Message.fail("网络有误！")})})},ok3:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addAlbum",{email:e.formItem3.email},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status&&(e.$Notice.config({top:50,duration:3,title:"通知",desc:"已经保存修改！请点击提交修改！"}),e.formItem3.email="",e.request(1))}).catch(function(t){e.$Message.fail("网络有误！")})})},ok4:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$http.post(e.GLOBAL.serverPath+"/excise/addAlbum",{password:e.formItem4.password},{emulateJSON:!0}).then(function(t){console.log(t.data.status),"ok"==t.data.status&&(e.$Notice.config({top:50,duration:3,title:"通知",desc:"已经保存修改！请点击提交修改！"}),e.formItem4.password="",e.request(1))}).catch(function(t){e.$Message.fail("网络有误！")})})}}},W={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleItem,"label-width":80}},[o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("h1",[t._v(t._s(t.msg))])])],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10}},[o("div",{staticStyle:{"font-size":"16px"}},[o("p",{attrs:{id:"verifyCode"}},[t._v("姓名："+t._s(t.name))])])])],1),t._v(" "),o("br"),t._v(" "),o("Row",[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10}},[o("div",{staticStyle:{"font-size":"16px"}},[o("p",{attrs:{id:"verifyCode"}},[t._v("学号："+t._s(t.account))])])])],1),t._v(" "),o("br"),t._v(" "),o("Row",[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10}},[o("div",{staticStyle:{"font-size":"16px"}},[o("p",{attrs:{id:"verifyCode"}},[t._v("电话："+t._s(t.phonenumber))])])]),t._v(" "),o("Button",{attrs:{id:"login_btn",size:"small",type:"primary"},on:{click:function(e){t.modal1=!0}}},[t._v("修改")])],1),t._v(" "),o("br"),t._v(" "),o("Row",[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10}},[o("div",{staticStyle:{"font-size":"16px"}},[o("p",{attrs:{id:"verifyCode"}},[t._v("邮箱："+t._s(t.email))])])]),t._v(" "),o("Button",{attrs:{id:"login_btn",size:"small",type:"primary"},on:{click:function(e){t.modal2=!0}}},[t._v("修改")])],1),t._v(" "),o("br"),o("br"),o("br"),t._v(" "),o("Row",[o("Col",{attrs:{xs:30,sm:30,md:30,lg:30}},[o("div",[o("Button",{attrs:{id:"login_btn",type:"primary"},on:{click:function(e){t.modal3=!0}}},[t._v("修改密码")]),t._v(" "),o("Button",{attrs:{id:"login_btn",type:"success"},on:{click:function(e){return t.handleSubmit("formItem")}}},[t._v("提交修改")])],1)])],1)],1),t._v(" "),o("Modal",{attrs:{title:"修改电话号码",width:"800",scrollable:"true","ok-text":"保存"},on:{"on-ok":function(e){return t.ok2("formItem2")}},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[o("Form",{ref:"formItem2",attrs:{model:t.formItem2,rules:t.ruleItem,"label-width":85}},[o("FormItem",{attrs:{label:"电话号码:",prop:"phonenumber"}},[o("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem2.phonenumber,callback:function(e){t.$set(t.formItem2,"phonenumber",e)},expression:"formItem2.phonenumber"}})],1)],1)],1),t._v(" "),o("Modal",{attrs:{title:"修改邮箱",width:"800",scrollable:"true","ok-text":"保存"},on:{"on-ok":function(e){return t.ok3("formItem3")}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("Form",{ref:"formItem3",attrs:{model:t.formItem3,rules:t.ruleItem,"label-width":85}},[o("FormItem",{attrs:{label:"邮箱:",prop:"email"}},[o("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem3.email,callback:function(e){t.$set(t.formItem3,"email",e)},expression:"formItem3.email"}})],1)],1)],1),t._v(" "),o("Modal",{attrs:{title:"修改密码",width:"800",scrollable:"true","ok-text":"保存"},on:{"on-ok":function(e){return t.ok4("formItem4")}},model:{value:t.modal3,callback:function(e){t.modal3=e},expression:"modal3"}},[o("Form",{ref:"formItem4",attrs:{model:t.formItem4,rules:t.ruleItem,"label-width":85}},[o("FormItem",{attrs:{label:"密码:",prop:"password"}},[o("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:t.formItem4.password,callback:function(e){t.$set(t.formItem4,"password",e)},expression:"formItem4.password"}})],1)],1)],1)],1)},staticRenderFns:[]};var H={name:"Reader",data:function(){return{msg:"",one_nav:"主页",two_nav:"用户图书馆",three_nav:"搜索书籍",currentView:"searchBook",modal7:!1,modal2:!1,modal6:!1,modal_loading:!1,value:5}},mounted:function(){this.msg=window.localStorage.getItem("username")},methods:{searchBook:function(){this.one_nav="主页",this.two_nav="用户图书馆",this.three_nav="搜索书籍",this.currentView="searchBook"},lookRecord:function(){this.one_nav="主页",this.two_nav="用户图书馆",this.three_nav="借阅记录",this.currentView="myRecord"},individualInfo:function(){this.one_nav="主页",this.two_nav="用户图书馆",this.three_nav="个人中心",this.currentView="individual"},returnTime:function(t){var e=this;this.$http.post(e.GLOBAL.serverPath+"/excise/getAllBorrowRecords",{raccount:window.localStorage.getItem("account"),currentPage:t},{emulateJSON:!0}).then(function(t){console.log(t.data.borrowrecords),e.total=t.data.pageInfo.total,e.data7=t.data.borrowrecords,e.books=[],e.data7.forEach(function(t){var o={};o.title="《"+t.album.title+"》";var a=(new Date).getTime();console.log(a),1==Math.ceil((a-t.inttime)/864e5)&&e.books.push(o)})})},warning:function(t){this.$Notice.warning({title:"借阅书籍到期提醒",desc:t?"":"您借阅的"+this.returnTime(1).books+"书籍还有1日到期，请注意办理续借或及时归还"})},del:function(){var t=this;this.modal_loading=!0,setTimeout(function(){t.modal_loading=!1,t.modal6=!1,t.$Message.success("退出成功"),t.$Loading.start(),t.$Loading.finish(),t.$router.push("/login")},2e3)},confirm:function(){this.modal_loading=!0,this.modal_loading=!1,this.modal7=!1},ok:function(){this.$Message.info("上传成功！")},cancel:function(){this.$Message.info("取消上传")},changePage1:function(){this.$Loading.start(),this.$Loading.finish(),this.$router.push("/login")}},components:{Button:z,searchBook:o("VU/8")(A,V,!1,null,null,null).exports,myRecord:o("VU/8")(T,J,!1,null,null,null).exports,individual:o("VU/8")(G,W,!1,function(t){o("H4JC")},"data-v-89174250",null).exports}},D={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"layout"},[o("Modal",{attrs:{width:"360"},model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),t._v(" "),o("span",[t._v("退出确认")])],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("退出后，将返回登录界面")]),t._v(" "),o("p",[t._v("是否退出？")])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("i-button",{staticStyle:{color:"white"},attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:function(e){return t.del()}}},[t._v("退出")])],1)]),t._v(" "),o("Modal",{attrs:{title:"留言反馈"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("p",[t._v("评分："),o("Rate",{attrs:{"show-text":"",value:t.value},on:{"update:value":function(e){t.value=e}}})],1),t._v(" "),o("i-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入..."}})],1),t._v(" "),o("Modal",{attrs:{width:"600"},model:{value:t.modal7,callback:function(e){t.modal7=e},expression:"modal7"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),t._v(" "),o("span",[t._v("帮助中心")])],1),t._v(" "),o("div",[o("p",[t._v("亲爱的读者：")]),t._v(" "),o("p",[t._v("     欢迎使用此图书借阅管理系统。为了让您和他人有更好的阅读体验，请仔细阅读以下事项。")]),t._v(" "),o("br"),t._v(" "),o("h4",[t._v("一、借阅规则：")]),t._v(" "),o("p",[t._v("    1. 本图书馆所有书籍对xx大学所有学生和教职人员开放。读者初次使用本系统需凭学号或教职工号注册，登录后则可随时修改个人信息与账号密码。")]),t._v(" "),o("p",[t._v("    2. 读者可以在图书馆检索系统浏览和查询数目和借阅状态，可在借阅记录中查看个人借阅记录。")]),t._v(" "),o("p",[t._v("    3. 每位读者可借阅5本书籍，借期60天。需要续借的读者请先归还再继续按照流程借阅。")]),t._v(" "),o("p",[t._v("    4. 读者须在借阅期限到达之前归还书籍，逾期将按相关规定收取超期滞纳金，每天每本0.1元。")]),t._v(" "),o("p",[t._v("    5. 确认借阅图书时，读者应当当场确认图书是否有损坏，如有问题及时向工作人员反映。一旦确认借阅后，衍生的损毁问题，由读者自行负责。")]),t._v(" "),o("p",[t._v("    6. 读者外借图书时，读者应当确认图书是否有损坏，否则衍生损毁问题，同样又读者自行负责。")]),t._v(" "),o("p",[t._v("    7. 读者归还图书时，应当到图书馆归还，并确认归还至指定的归还地点。否则管理员无法登记归还。")]),t._v(" "),o("p",[t._v("    8. 图书有损坏、遗失处理按本规定第二条遗失赔偿办法中的相关规定执行。")]),t._v(" "),o("br"),t._v(" "),o("h4",[t._v("二、损坏遗失赔偿办法")]),t._v(" "),o("p",[t._v("    1. 损坏赔偿。读者若在使用过程中对图书造成损坏，应视损坏程度轻重予以相应赔偿，赔偿范围按照著录价格的1-2倍收取。损坏严重导致不能正常使用或影响使用的，按第2款“遗失赔偿”条款处理。")]),t._v(" "),o("p",[t._v("    2. 遗失赔偿。读者若遗失图书，需及时向图书馆报告，并购买相同的书本赔偿，或者按照著录价格的2倍赔偿。")]),t._v(" "),o("br"),t._v(" "),o("p",[t._v("如有疑问或遇到问题，请点击系统右上角【留言反馈】给管理员留言，管理员会一一处理并通过邮件与你联系。")]),t._v(" "),o("br"),t._v(" "),o("div",{staticStyle:{"text-align":"right"}},[o("p",[t._v("xx大学图书管理系统")])])]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("i-button",{staticStyle:{color:"white"},attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:function(e){return t.confirm()}}},[t._v("确定")])],1)]),t._v(" "),o("div",{staticClass:"layout-ceiling"},[t._m(0),t._v(" "),o("div",{staticClass:"layout-ceiling-main"},[o("a",{attrs:{href:"#"}},[o("Icon",{attrs:{type:"ios-browsers-outline"}})],1),t._v(" "),o("a",{on:{click:function(e){t.modal7=!0}}},[t._v("帮助中心")]),t._v(" |\n      "),o("a",{on:{click:function(e){t.modal2=!0}}},[t._v("留言反馈")]),t._v(" |\n      "),o("a",{on:{click:function(e){t.modal6=!0}}},[t._v("退出登录")])])]),t._v(" "),t._m(1),t._v(" "),o("div",{staticClass:"layout-content"},[o("Row",{attrs:{type:"flex"}},[o("Col",{staticClass:"layout-menu-left",attrs:{span:"5"}},[o("Menu",{attrs:{"active-name":"1-1",theme:"dark",width:"auto","open-names":["1"]}},[o("Submenu",{attrs:{name:"1"}},[o("template",{slot:"title"},[o("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n          欢迎你，"+t._s(t.msg)+"同学\n        ")],1),t._v(" "),o("MenuItem",{attrs:{name:"1-1"},nativeOn:{click:function(e){return t.searchBook(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-search"}}),t._v("\n          搜索书籍")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-2"},nativeOn:{click:function(e){return t.lookRecord(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-bookmarks"}}),t._v("\n          借阅记录")],1)]),t._v(" "),o("MenuItem",{attrs:{name:"1-3"},nativeOn:{click:function(e){return t.individualInfo(e)}}},[o("span",[o("Icon",{attrs:{type:"ios-person"}}),t._v("\n          个人中心")],1)])],2)],1)],1),t._v(" "),o("Col",{attrs:{span:"19"}},[o("div",{staticClass:"layout-breadcrumb"},[o("Breadcrumb",[o("BreadcrumbItem",{attrs:{href:"#"}},[t._v(t._s(t.one_nav))]),t._v(" "),o("BreadcrumbItem",{attrs:{href:"#"}},[t._v(t._s(t.two_nav))]),t._v(" "),o("BreadcrumbItem",[t._v(t._s(t.three_nav))]),t._v(" "),o("Button",{attrs:{id:"login_btn"},on:{click:function(e){return t.warning(!1)}}},[o("Badge",{attrs:{dot:""}},[o("Icon",{attrs:{type:"ios-mail-outline",size:"26","color:white":""}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[void 0,t._v(" "),void 0,t._v(" "),void 0,t._v(" "),o(t.currentView,{tag:"component"})],2)]),t._v(" "),o("div",{staticStyle:{height:"600px"}}),t._v(" "),o("div",{staticClass:"layout-copy"},[t._v("\n      2019-2020 © 图书馆管理\n    ")])])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-ceiling-left"},[e("div",{staticClass:"layout-logo-left"},[e("h2",{staticStyle:{color:"white"}},[this._v("图书管理系统")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout-header"},[e("div",{staticClass:"layout-logo"})])}]};var j=o("VU/8")(H,D,!1,function(t){o("qNEF")},"data-v-0dbffe27",null).exports,Q={name:"HelloWorld",data:function(){var t=this;return{note:{width:"100%",height:"100%",backgroundColor:"#e7e1e1",backgroundImage:"url("+o("A1tS")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center,center",backgroundSize:"cover",marginTop:"40px"},msg:"图书馆",verifyCode:"hello",formItem:{username:"",account:"",password:"",repassword:"",code:""},ruleItem:{username:[{required:!0,message:"昵称不能为空",trigger:"blur"},{type:"string",max:30,message:"昵称不能超过30位",trigger:"blur"}],account:[{required:!0,message:"请填写有效学号/教职工号！",trigger:"blur"}],password:[{required:!0,message:"请填写有效密码!",trigger:"blur"},{type:"string",min:3,message:"密码长度不能小于6位",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码！",trigger:"blur"},{type:"string",min:3,message:"密码长度不能小于6位",trigger:"blur"},{validator:function(e,o,a){""===o?a(new Error("请再次输入密码")):o!==t.formItem.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},loading:!1}},methods:{handleSubmit:function(t){var e=this,o=this;this.loading=!0,this.$refs[t].validate(function(t){t?o.$http.post(o.GLOBAL.serverPath+"/excise/register",{username:o.formItem.name,account:o.formItem.account,password:o.formItem.password},{emulateJSON:!0}).then(function(t){console.log(t.data.registerUser),"yes"===t.data.result?(this.$Message.success("注册成功!"),window.localStorage.setItem("userId",t.data.registerUser.rid),window.localStorage.setItem("account",t.data.registerUser.account),window.localStorage.setItem("username",t.data.registerUser.name),window.localStorage.setItem("sex",t.data.registerUser.sex),window.localStorage.setItem("condi",t.data.registerUser.condi),this.$router.replace({path:"/login"})):(this.$Message.error("注册失败！账号或密码有误"),this.loading=!1)}):e.loading=!1})},changePage:function(){var t=this;setTimeout(function(){t.$Loading.start(),t.$Loading.finish(),t.$router.push({path:"/login"})},600)}}},X={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello",style:t.note},[o("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleItem,"label-width":80}},[o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("h2",[t._v(t._s(t.msg))])])],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"username",label:"昵称"}},[o("Input",{attrs:{type:"text",placeholder:"填写昵称"},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"account",label:"账号"}},[o("Input",{attrs:{type:"text",placeholder:"填写有效的学号/教职工号"},model:{value:t.formItem.account,callback:function(e){t.$set(t.formItem,"account",e)},expression:"formItem.account"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-home-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"password",label:"密码"}},[o("Input",{attrs:{type:"password",placeholder:"你的密码"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:23,sm:23,md:23,lg:23}},[o("FormItem",{attrs:{prop:"repassword",label:"确认密码"}},[o("Input",{attrs:{type:"password",placeholder:"再次输入以确认密码"},model:{value:t.formItem.repassword,callback:function(e){t.$set(t.formItem,"repassword",e)},expression:"formItem.repassword"}},[o("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1)],1),t._v(" "),o("Row",[o("Col",{attrs:{xs:24,sm:24,md:24,lg:24}},[o("Button",{attrs:{id:"register_btn",shape:"circle",type:"primary",loading:t.loading},nativeOn:{click:function(e){return t.handleSubmit("formItem")}}},[t.loading?o("span",[t._v("注册中...")]):o("span",[t._v("注册")])])],1)],1),t._v(" "),o("Row",{staticClass:"tip"},[o("Col",{attrs:{xs:10,sm:10,md:10,lg:10,offset:"16"}},[o("span",{staticClass:"login_font"},[o("a",{on:{click:function(e){return t.changePage()}}},[t._v("已有账号？登录 ")])])])],1)],1),t._v(" "),o("vue-particles",{staticClass:"lizi",attrs:{color:"#fff",particleOpacity:.7,particlesNumber:60,shapeType:"circle",particleSize:4,linesColor:"#fff",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,moveSpeed:2,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}})],1)},staticRenderFns:[]};var K=o("VU/8")(Q,X,!1,function(t){o("2oTL")},"data-v-51a902e8",null).exports;a.default.use(i.a),a.default.use(s.a),a.default.use(c.a),a.default.use(d.a);var Z=new i.a({routes:[{path:"/",name:"Register",component:K},{path:"/login",name:"Login",component:f},{path:"/index",name:"Index",component:U},{path:"/reader",name:"Reader",component:j}]}),Y={serverPath:"http://120.27.240.35:8080"},tt=o("VU/8")(Y,null,!1,null,null,null).exports,et=o("mM94");a.default.use(et.a),a.default.use(c.a),a.default.prototype.GLOBAL=tt,a.default.config.productionTip=!1,new a.default({el:"#app",router:Z,template:"<App/>",components:{App:r}})},QLRR:function(t,e){},p0ZO:function(t,e){},qNEF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8829270a3d5d1e46c691.js.map